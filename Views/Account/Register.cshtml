@{
    ViewData["Title"] = "Register";
}

<div class="register-card">

    <!-- LEFT LOGO -->
    <div class="logo-container">
        <img src="~/images/ctu-logo.png" alt="CTU Logo" />
    </div>

    <div class="divider"></div>

    <!-- RIGHT FORM -->
    <div class="form-side">
        <h4 class="mb-3">Create your account</h4>

        <form asp-action="Register" method="post">

            @* <!-- ROLE -->
            <div class="mb-3">
                <label class="form-label">Select Role</label>
                <select name="roleString" id="role" class="form-select" required>
                    <option value="">Select Role</option>
                    <option value="Student">Student</option>
                    <option value="Company">Company</option>
                </select>
            </div> *@

            <!-- FULL NAME -->
            <div class="mb-3">
                <input name="fullName" class="form-control" placeholder="Full Name" required />
            </div>

            <!-- STUDENT ID (Students only but safe to include) -->
            <div class="mb-3">
                <input name="studentId" class="form-control" placeholder="Student ID " />
            </div>

            <!-- MOBILE -->
            <div class="mb-3">
                <input name="mobileNumber" class="form-control" placeholder="Mobile Number" required />
            </div>   
            <!-- Facebook -->
            <div class="mb-3">
                <input name="Facebook" class="form-control" placeholder="Facebook" required />
            </div>


            <!-- EMERGENCY CONTACT -->
            <div class="mb-3">
                <input name="emergencyContact" class="form-control" placeholder="Emergency Contact" required />
            </div>

            <!-- ADDRESS -->
            <div class="mb-3">
                <input name="address" class="form-control" placeholder="Address" required />
            </div>

            <!-- PROGRAM -->
            <div class="mb-3">
                <select name="program" class="form-select" required>
                    <option disabled selected>Select Program</option>
                    <option>Bachelor of Industrial Technology</option>
                </select>
            </div>

            <!-- BIRTHDAY -->
            <label class="form-label small">Birthdate</label>
            <div class="row mb-3">
                <div class="col-4">
                    <select name="birthMonth" class="form-select" required>
                        <option value="">Month</option>
                        @for (int m = 1; m <= 12; m++)
                        {
                            <option value="@m">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(m)</option>
                        }
                    </select>
                </div>
                <div class="col-4">
                    <select name="birthDay" class="form-select" required>
                        @for (int d = 1; d <= 31; d++)
                        {
                            <option value="@d">@d</option>
                        }
                    </select>
                </div>
                <div class="col-4">
                    <select name="birthYear" class="form-select" required>
                        @for (int y = DateTime.Now.Year; y >= 1950; y--)
                        {
                            <option value="@y">@y</option>
                        }
                    </select>
                </div>
            </div>

            <!-- GENDER -->
            <label class="form-label small">Gender</label>
            <div class="row mb-3">
                <div class="col-4">
                    <label class="gender-box">
                        Female
                        <input type="radio" name="gender" value="Female" required />
                    </label>
                </div>
                <div class="col-4">
                    <label class="gender-box">
                        Male
                        <input type="radio" name="gender" value="Male" />
                    </label>
                </div>
                <div class="col-4">
                    <label class="gender-box">
                        Custom
                        <input type="radio" name="gender" value="Custom" />
                    </label>
                </div>
            </div>

            <!-- COMPANY NAME -->
            <div class="mb-3" id="companyNameDiv" style="display:none;">
                <input name="companyName" id="companyName"
                       class="form-control" placeholder="Company Name" />
            </div>

            <!-- EMAIL -->
            <div class="mb-3">
                <input name="email" type="email" class="form-control"
                       placeholder="Email" required />
            </div>

            <!-- PASSWORD -->
            <div class="mb-3">
                <input name="password" type="password" class="form-control"
                       placeholder="New password" required />
            </div>

            <!-- SUBMIT -->
            <button type="submit" class="btn-ctu w-100 mb-3">Register</button>

            <div class="text-center">
                <small>Already have an account? <a asp-action="Login">Sign In</a></small>
            </div>

            @if (ViewBag.Error != null)
            {
                <div class="alert alert-danger mt-3 text-center">@ViewBag.Error</div>
            }

            @if (TempData["Success"] != null)
            {
                <div class="alert alert-success mt-3 text-center">@TempData["Success"]</div>
            }

        </form>
    </div>
</div>

<script>
    const roleSelect = document.getElementById('role');
    const companyDiv = document.getElementById('companyNameDiv');
    const companyInput = document.getElementById('companyName');

    if (roleSelect) {
        roleSelect.addEventListener('change', function () {
            if (this.value === 'Company') {
                companyDiv.style.display = 'block';
                companyInput.required = true;
            } else {
                companyDiv.style.display = 'none';
                companyInput.required = false;
                companyInput.value = '';
            }
        });
    }
</script>
