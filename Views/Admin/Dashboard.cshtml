@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Dashboard";
}

<div class="container-fluid my-4">

    <!-- Year Dropdown -->
    <div class="row mb-4">
        <div class="col-12 d-flex align-items-center">
            <label for="yearSelector" class="me-3 fw-bold">Select Year:</label>
            <select id="yearSelector" class="form-select" style="width:150px;">
                <option value="2026" selected>2026</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
            </select>
        </div>
    </div>

    <div class="row g-4">

        <!-- Pending vs Approved -->
        <div class="col-12">
            <div class="card shadow-sm p-4">
                <h5 class="fw-bold mb-3" id="pendingApprovedTitle"></h5>
                <div style="height:380px;">
                    <canvas id="pendingApprovedChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Total Users vs Companies -->
        <div class="col-12">
            <div class="card shadow-sm p-4">
                <h5 class="fw-bold mb-3" id="totalUsersCompaniesTitle"></h5>
                <div style="height:380px;">
                    <canvas id="totalUsersCompaniesChart"></canvas>
                </div>
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        Chart.defaults.font.family = 'Segoe UI';
        Chart.defaults.color = '#666';

        // ⭐ BIGGER BARS STYLE
        const premiumBarStyle = {
            borderRadius: 8,
            barPercentage: 0.9,        // was 0.6
            categoryPercentage: 0.9,   // was 0.6
            maxBarThickness: 60        // prevents over-stretching
        };

        const premiumOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'top' }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { color: "rgba(0,0,0,0.05)" }
                },
                x: { grid: { display: false } }
            }
        };

        const pendingApprovedChart = new Chart(document.getElementById('pendingApprovedChart'), {
            type: 'bar',
            data: {
                labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
                datasets: [
                    { label:'Pending User', data:[2,2,6,7,3,4,2,5,6,4,3,5], backgroundColor:'#FA90D3', ...premiumBarStyle },
                    { label:'Approved User', data:[3,4,5,6,5,4,6,3,5,6,4,7], backgroundColor:'#55D2FF', ...premiumBarStyle }
                ]
            },
            options: premiumOptions
        });

        const totalUsersCompaniesChart = new Chart(document.getElementById('totalUsersCompaniesChart'), {
            type: 'bar',
            data: {
                labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
                datasets: [
                    { label:'Total User', data:[2,2,6,7,4,5,3,6,7,5,4,6], backgroundColor:'#90FAD5', ...premiumBarStyle },
                    { label:'Total Companies', data:[3,4,5,6,5,4,5,7,6,4,5,7], backgroundColor:'#FFC355', ...premiumBarStyle }
                ]
            },
            options: premiumOptions
        });

        document.getElementById('yearSelector').addEventListener('change', function() {
            const year = this.value;
            document.getElementById('pendingApprovedTitle').textContent = year + " Pending vs Approved Users";
            document.getElementById('totalUsersCompaniesTitle').textContent = year + " Total Users vs Companies";
        });
    </script>
}
